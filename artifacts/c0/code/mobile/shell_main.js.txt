/* ANNOTATION_BLOCK_START
{
  "artifact_id": "c0_rn_shell_src_main",
  "version_tag": "0.1.1-c0",
  "g_created": 4,
  "g_last_modified": 11,
  "description": "Main annotated source code file (placeholder) for the React Native (Expo) shell application developed in Cycle 0. This represents the entry point or a primary structural component of the mobile app, featuring basic navigation and static content, now using React Native Paper (Material Design 3).",
  "artifact_type": "CODE_MODULE",
  "status_in_lifecycle": "DEVELOPMENT",
  "purpose_statement": "To provide a foundational, runnable React Native (Expo) application shell with basic navigation and UI stubs using React Native Paper (Material Design 3), as defined in Cycle 0. This serves as the starting point for iterative development in subsequent cycles.",
  "key_logic_points": [
    "Initializes the Expo application with React Native Paper Provider.",
    "Sets up basic navigation (e.g., Bottom Tab Navigator, Stack Navigators for core C0 flows) using React Navigation.",
    "Includes placeholder screens populated with static mock data, using React Native Paper components.",
    "Integrates React Native Paper for styling, referencing a basic Material Design 3 theme.",
    "This is a high-level placeholder; detailed component breakdown and logic will be developed by AI code agents and supervised by a human developer."
  ],
  "interfaces_provided": [
    { "name": "Main App UI", "interface_type": "GUI", "details": "Provides the primary graphical user interface for the mobile application shell, styled with Material Design 3.", "notes": "Interaction limited to navigation between static/stubbed screens in Cycle 0." }
  ],
  "requisites": [
    { "description": "Expo and React Native environment setup.", "type": "ENVIRONMENT" },
    { "description": "React Native Paper library and dependencies (e.g., react-native-vector-icons) integrated.", "type": "LIBRARY_DEPENDENCY" },
    { "description": "Figma prototype (c0_figma_prototype) providing the UI/UX design for the shell, to be interpreted with Material Design 3 components.", "type": "DESIGN_INPUT" }
  ],
  "external_dependencies": [
    { "name": "React", "version": "^18.x.x", "reason": "Core UI library for React Native." },
    { "name": "React Native", "version": "0.74.x (Expo SDK 51 compatible)", "reason": "Framework for building native mobile apps." },
    { "name": "Expo", "version": "SDK 51", "reason": "Platform and tools for universal React applications." },
    { "name": "@react-navigation/native", "version": "^6.x", "reason": "Navigation library." },
    { "name": "react-native-paper", "version": "^5.x", "reason": "Material Design 3 component library for React Native." },
    { "name": "react-native-vector-icons", "version": "^10.x (or compatible)", "reason": "Icon library often required by React Native Paper." }
  ],
  "internal_dependencies": ["c0_mobile_readme"],
  "dependents": ["c1_rn_app_src"],
  "linked_issue_ids": ["issue_g5_visual_tech_strategy_update"],
  "quality_notes": {
    "linting": "PENDING (ESLint to be configured)",
    "unit_tests": "PENDING (Jest tests to be developed)",
    "manual_review_comment": "Updated placeholder to reflect use of React Native Paper (Material Design 3) at g=11. Initial structure based on Cycle 0 Blueprint. AI code generation will populate this further.",
    "last_security_review_g": null
  }
}
ANNOTATION_BLOCK_END */

// WorldChef/Cultif - Cycle 0 React Native Shell Application (Main Placeholder with React Native Paper)
// Artifact ID: c0_rn_shell_src_main
// Version: 0.1.1-c0
// Last Updated (g): 11

import React from 'react';
import { View, StyleSheet } from 'react-native';
import { Provider as PaperProvider, Appbar, BottomNavigation, Text, Card, Button, MD3LightTheme as DefaultTheme } from 'react-native-paper';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';

// Define a basic theme (can be customized further based on Figma tokens)
const theme = {
  ...DefaultTheme,
  //colors: {
  //  ...DefaultTheme.colors,
  //  primary: 'tomato', 
  //  accent: 'yellow',
  //},
};

// Placeholder Screens (using React Native Paper components where appropriate)
const OnboardingScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">Onboarding Stub (T-01b)</Text></View>;
const AuthShellScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">Auth Shell Stub (T-11)</Text></View>;
const HomeScreenStub = () => (
  <View style={styles.container}>
    <Appbar.Header>
      <Appbar.Content title="Home (T-02)" />
    </Appbar.Header>
    <Card style={styles.card}>
      <Card.Title title="Welcome to Cultif Shell" />
      <Card.Content>
        <Text variant="bodyMedium">This is a placeholder Home Screen for Cycle 0 using React Native Paper.</Text>
        <Text variant="bodySmall">Navigation and static content based on Figma prototype, implemented with Material Design 3 components.</Text>
      </Card.Content>
      <Card.Actions>
        <Button>Explore</Button>
      </Card.Actions>
    </Card>
  </View>
);
const RecipeDetailScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">Recipe Detail Stub (T-03)</Text></View>;
const RecipeUploadWizardStub = () => <View style={styles.container}><Text variant="headlineMedium">Recipe Upload Stub (T-06)</Text></View>;
const PaywallModalStub = () => <View style={styles.container}><Text variant="headlineMedium">Paywall Modal Stub (T-04)</Text></View>;
const SubscriptionFlowStub = () => <View style={styles.container}><Text variant="headlineMedium">Subscription Flow Stub (T-08)</Text></View>;

const ExploreScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">Explore Stub</Text></View>;
const PlanScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">Plan Stub</Text></View>;
const YouScreenStub = () => <View style={styles.container}><Text variant="headlineMedium">You Stub</Text></View>;

// Main Stack Navigator (example for one flow)
const HomeStack = createStackNavigator();
function HomeStackNavigator() {
  return (
    <HomeStack.Navigator screenOptions={{ headerShown: false }}>
      <HomeStack.Screen name="HomeFeed" component={HomeScreenStub} />
      <HomeStack.Screen name="RecipeDetail" component={RecipeDetailScreenStub} />
      {/* Add other screens in Home stack: T-06 (Upload), T-04 (Paywall), T-08 (Subscription) */}
    </HomeStack.Navigator>
  );
}

// AppShell using BottomNavigation from React Native Paper
const AppShell = () => {
  const [index, setIndex] = React.useState(0);
  const [routes] = React.useState([
    { key: 'home', title: 'Home', focusedIcon: 'home', unfocusedIcon: 'home-outline' }, // Corresponds to T-02
    { key: 'explore', title: 'Explore', focusedIcon: 'magnify' }, // Generic Explore
    { key: 'plan', title: 'Plan', focusedIcon: 'calendar-month' }, // Generic Plan (T-07 later)
    { key: 'you', title: 'You', focusedIcon: 'account' }, // Generic You/Profile (T-16 later)
    // Add stubs based on Cycle 0 Blueprint (T-01b, T-11, T-03, T-06, T-04, T-08)
    // These might be better as part of Stack Navigators triggered from tabs or initial flows
  ]);

  const renderScene = BottomNavigation.SceneMap({
    home: HomeStackNavigator, // Using the StackNavigator for the home tab
    explore: ExploreScreenStub,
    plan: PlanScreenStub,
    you: YouScreenStub,
  });

  // TODO: Implement full navigation as per Figma Page Catalogue for Cycle 0
  // T-01b Onboarding-FeatureTour (Stack before tabs?)
  // T-11 Auth-Shell (Stack before tabs?)
  // T-02 Home-Feed/ExploreDishes (Part of Home Tab Stack)
  // T-03 Recipe-Detail-Free (Part of Home Tab Stack)
  // T-06 Recipe-Upload-Wizard (Part of Home Tab Stack or separate modal stack)
  // T-04 Recipe-Detail-Paid-Locked (Modal overlay)
  // T-08 Subscription-Flow (Part of a stack, possibly from Recipe Detail or Profile)

  return (
    <BottomNavigation
      navigationState={{ index, routes }}
      onIndexChange={setIndex}
      renderScene={renderScene}
    />
  );
};

// Main App component wrapped with PaperProvider and NavigationContainer
export default function Main() {
  return (
    <PaperProvider theme={theme}>
      <NavigationContainer>
        <AppShell />
        {/* Potentially wrap AppShell with StackNavigator for Onboarding/Auth flows if they occur before tabs */}
      </NavigationContainer>
    </PaperProvider>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    padding: 20,
  },
  card: {
    width: '90%',
    marginVertical: 10,
  }
});

console.log('Cycle 0 React Native Shell Main Source File (c0_rn_shell_src_main) with React Native Paper placeholder loaded.'); 